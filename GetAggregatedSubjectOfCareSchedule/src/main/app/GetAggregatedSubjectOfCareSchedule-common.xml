<?xml version="1.0" encoding="utf-8" standalone="no"?>
<mule 
	xmlns="http://www.mulesoft.org/schema/mule/core" 
	xmlns:spring="http://www.springframework.org/schema/beans" 
	xmlns:management="http://www.mulesoft.org/schema/mule/management"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
	   http://www.springframework.org/schema/beans    http://www.springframework.org/schema/beans/spring-beans-current.xsd
	   http://www.mulesoft.org/schema/mule/core       http://www.mulesoft.org/schema/mule/core/current/mule.xsd
	   http://www.mulesoft.org/schema/mule/management http://www.mulesoft.org/schema/mule/management/current/mule-management.xsd
	">

  <spring:beans>

	  <!-- Import required mule config files that are loaded from other jar-files on the classpath, e.g. agp-core.jar, since they can't be loaded from the mule-deploy.properties file -->
	  <spring:import resource="classpath:aggregating-services-common.xml" />
	  <spring:import resource="classpath:aggregating-service.xml" />
	  <spring:import resource="classpath:PingForConfiguration-rivtabp21-service.xml" />
	
	  <!-- Load property files in three steps, here we only specify the third step that is specific for each aggregating service, see agp/src/main/app/aggregating-services-common.xml for the other two steps... -->
	  
	  <!-- 3. Replacement for org.springframework.beans.factory.config.PropertyPlaceholderConfigurer
	       that supports decrypting encrypted property values -->
	  <spring:bean class="org.jasypt.spring.properties.EncryptablePropertyPlaceholderConfigurer" id="propertyConfigurer">
	    <spring:constructor-arg ref="configurationEncryptor"/>
	    <spring:property name="ignoreResourceNotFound" value="true"/>
	    <spring:property name="locations">
	      <spring:list>
	        <spring:value>classpath:GetAggregatedSubjectOfCareSchedule-config.properties</spring:value>
	        <spring:value>classpath:GetAggregatedSubjectOfCareSchedule-config-override.properties</spring:value>
	      </spring:list>
	    </spring:property>
	  </spring:bean>
  </spring:beans>

  <!-- 
  <management:jmx-default-config registerMx4jAdapter="true" registerLog4j="true">
        <! - - 
        port="${JMX_PORT}" 
        <management:credentials>
            <spring:entry key="${JMX_USER}" value="${JMX_PWD}"/>
        </management:credentials>
        - - >
  </management:jmx-default-config> 
  -->
</mule>
